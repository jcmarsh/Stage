# Functions for setting up the running environment for Player.
# Used by run_player.py and overlord.py

# Author James Marshall

def WriteFloor(name):    
    # Use the provided map name in floor.inc, which is included by the world file
    f = open("./worlds/floor.inc", "w")

    f.write("# floor.inc\n")
    f.write("# This file is automatically generated by run_player.py so that we can select the floorplan file from the command line.\n")

    f.write("floorplan\n")
    f.write("(\n")
    f.write("\tname \"grid\"\n")
    f.write("\tsize [16 16 .8]\n")
    f.write("\tpose [0 0 0 0]\n")
    f.write("\tbitmap \"" + name + "\"\n")

    f.write(")\n\n")

    f.close()
    return 0

def WriteCFG(new_config_name, old_config_name, map_name):
    new_cfg = open(new_config_name, "w")
    old_cfg = open(old_config_name, "r")
    
    for line in old_cfg:
        new_cfg.write(line)
    old_cfg.close()

    new_cfg.write("\n\n")
    new_cfg.write("# Added by run_player.cfg\n")
    new_cfg.write("driver\n(")
    new_cfg.write("\tname \"mapfile\"\n")
    new_cfg.write("\tprovides [\"localhost:6665:map:0\"]\n")
    new_cfg.write("\tfilename \"" + "./worlds/" + map_name + "\"\n")
    new_cfg.write("\tresolution .032\n")
    new_cfg.write(")\n\n")
    new_cfg.close()
    return 0
